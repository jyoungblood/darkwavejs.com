---
import { getCollection } from "astro:content";
import BlogLayout from "../../layouts/BlogLayout.astro";
import ArchiveList from "../../components/ArchiveList.astro";

const blogEntries = await getCollection("blog", ({ data }) => {
  return data.status === "published";
});

// Sort by date, newest first
const sortedEntries = blogEntries.sort((a, b) => {
  return new Date(b.data.date).getTime() - new Date(a.data.date).getTime();
});
---

<BlogLayout>
  <ArchiveList entries={sortedEntries} emptyMessage="No blog posts yet." />
</BlogLayout>
