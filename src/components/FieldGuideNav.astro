---
/**
 * Field Guide navigation component.
 * Dynamically loads published fieldguide entries from the centralized navigation config.
 */
import { getFieldguideNavEntries } from '../utils/navigation';
import MobileNavDropdown from './MobileNavDropdown.astro';
import NavList from './NavList.astro';

const entries = await getFieldguideNavEntries();
const currentPath = Astro.url.pathname;

// Find current page title for mobile dropdown
const currentEntry = entries.find(e => currentPath === e.href || currentPath === e.href.slice(0, -1));
const currentPageTitle = currentEntry?.title || 'Navigate';
---

<!-- Mobile Dropdown Nav -->
<MobileNavDropdown id="fieldguide" currentTitle={currentPageTitle} label="Field Guide">
  <NavList entries={entries} currentPath={currentPath} />
</MobileNavDropdown>

<!-- Desktop/Tablet Nav -->
<nav class="hidden sm:block">
  <h2 class="text-sm font-semibold text-neutral-500 uppercase tracking-wide mb-4">Field Guide</h2>
  <NavList entries={entries} currentPath={currentPath} />
</nav>
